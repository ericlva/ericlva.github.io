---
layout: post
title: "统计用户行为的正确做法"
date: 2012-03-31 05:10
comments: true
categories: seo
tags: [stastistics,user,url,referer]
---

判断用户来源一般有4个途径：
1.cookie，不影响url，不精准，无额外负荷
2.http referer，不影响url，不精准，无额外负荷
3.url参数，影响url，精准，无额外负荷，比如http://seoaqua.com/?sourceid=yyy，非web渠道的用户行为可以使用这种方式，与seo无关
4.javascript，不影响url，精准，可能有额外负荷
5.url参数+程序redirect，不影响url，精准，可能有额外负荷

很多公司自开发的统计系统模仿早期统计系统的思路，为了照顾所有情况均，采用第3种方式，也许是urchin是罪魁祸首吧。
只要不影响url，就可以长期使用，若影响url则只能短期使用。一般是有大改版的时候才能启用3这种方式，收集足够的信息后就需要撤掉。

第3种方式有什么害处？
首先会造成搜索引擎额外工作量，其次是让搜索引擎发现本网站有重复内容，最重要的是目标页面的权重被分散了。

统计分2方面，站外、站内。
站外是基本无法使用js和cookie的，那么只能使用2和3的方法，使用3的前提是那个页面有大于1个链接指向本网站，但这种情况有多少，是否有必要？
站内完全可以使用第3种方式。
因此正确的做法是第4种

最后解释一下第5种方式，这是一种平滑过渡的方法，可以在程序里判断是否存在类似“sourceid”的参数，若存在，则返回301，输出不带"sourceid"的地址。
例如http://seoaqua.com/?sourceid=yyy，跳转到http://seoaqua.com/
为什么在程序里做？因为url参数的记录一般是交给前端服务器的，必须经过这一层，才能统计到，在程序里做跳转就肯定会经过前端服务器了。
具体的做法因不同技术架构而定，请不要照搬。

